<head>
  <title>babble IM: watch-as-i-type chat</title>

  <meta name="viewport" content="width=device-width; initial-scale=1.0; maximum-scale=1.0;">
  
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
  <script src="/javascripts/humanize.min.js"></script>
  <link href='http://fonts.googleapis.com/css?family=Lobster' rel='stylesheet' type='text/css'>

  <script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-30916831-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
  </script>
</head>

<body>
  <div id="container">
    {{> login}}
    {{> chat}}
    <div id="message">
      This is an experiment using <a href="http://meteor.com">Meteor</a>. Feel free to play with it, but please be gentle. And it's not locked down at all, so don't put any sensitive data on it.
    </div>
    <div id="footer">
      Created by <a href="http://chetansurpur.com">Chetan Surpur</a>. Code at <a href="http://github.com/chetan51/babble">GitHub</a>.
    </div>
  </div>
</body>

<template name="login">
  <div id="login" class={{class_visible}}>
    <div class="name">
      <span class="label">My name is</span>
      <span class="input"><input type="text"></input></span>
    </div>
		<div class="buttons {{class_buttons_visible}}">
			<div class="label">and I want a</div>
      <span class="button-container">
        <button class="public">Public Chat</button>
      </span>
      <span class="button-container">
        <button class="private">Private Chat</button>
      </span>
		</div>
  </div>
</template>

<template name="chat">
  <div id="chat" class={{class_visible}}>
    {{#each messages}}
      {{> message}} 
    {{/each}}
  </div>
</template>

<template name="message">
  <div {{id_editable}}
    class="message
      {{class_incomplete}}
      {{class_empty}}
      {{class_side}}
      {{class_color}}">
    <div class="name">{{name}}</div>
    <div class="content">
      {{#if editable}}
      <textarea class="text" name="input-{{_id}}">{{text}}</textarea>
      {{else}}
        <span class="text">{{text}}</span>
      {{/if}}
    </div>
    <div class="time">
      {{#if incomplete}}
        started at
      {{else}}
        sent at
      {{/if}}
      {{timestamp}}
    </div>
  </div>
</template>
