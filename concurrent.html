<head>
  <title>concurrent: real-time chat</title>
</head>

<body>
  <div id="container">
    {{> chat}}
    {{> name_prompt}}
  </div>
</body>

<template name="name_prompt">
  <div id="name-prompt" class={{class_visible}}>
    <span class="label">My name is</span>
    <span class="input"><input type="text"></input></span>
  </div>
</template>

<template name="chat">
  <div id="chat" class={{class_visible}}>
    {{#each messages}}
      {{> message}} 
    {{/each}}
  </div>
</template>

<template name="message">
  <div class="message{{class_incomplete}}{{class_side}}{{class_color}}" id="{{id_editable}}">
    <div class="name">{{name}}</div>
    <div class="content">
      {{#if editable}}
      <textarea class="text" id="input-{{_id}}">{{text}}</textarea>
      {{else}}
        <span class="text">{{text}}</span>
      {{/if}}
    </div>
    <div class="time">
      {{#if incomplete}}
        started at
      {{else}}
        sent at
      {{/if}}
      {{timestamp}}
    </div>
  </div>
</template>
